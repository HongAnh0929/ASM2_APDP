@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@*
    Đây là comment mặc định khi tạo view trong MVC.
*@
@model SIMS.DatabaseContext.Entities.Student
@* View này nhận vào Model là một Student — chính là sinh viên đang đăng nhập *@

@{
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    @* Sử dụng layout chính của hệ thống *@

    ViewData["Title"] = "Student Dashboard";
    @* Tiêu đề trang dashboard của sinh viên *@

    ViewData["breadcrumb"] = "Dashboard";
    @* Breadcrumb chính *@

    ViewData["breadcrumb_item"] = "Home";
    @* Breadcrumb phụ *@

    var courses = ViewBag.Courses as List<SIMS.DatabaseContext.Entities.Course>;
    @* Lấy danh sách các khóa học mà sinh viên đang đăng ký.
       Courses được đẩy từ controller qua ViewBag.
    *@
}

<div style="display: flex; justify-content: center; gap: 40px; margin-top: 30px;">

    @* ======================= STUDENT INFO BOX ======================= *@
    <div style="
        width: 420px;
        background: #ffffff;
        padding: 20px;
        border-radius: 12px;
        border: 1px solid #ddd;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        display: flex;
        align-items: center;
        gap: 20px;
    ">
        @* Icon đại diện cho sinh viên *@
        <span class="fas fa-user fa-fw" style="font-size: 80px; color: #555;"></span>

        @* Thông tin sinh viên — lấy từ Model *@
        <div style="font-size: 15px;">
            <h4 class="fw-bold mb-2">Student Info</h4>

            <p><strong>Name:</strong> @Model.FullName</p>
            @* Họ tên *@

            <p><strong>Class:</strong> @Model.Class</p>
            @* Lớp đang theo học *@

            <p><strong>Gender:</strong> @Model.Gender</p>
            @* Giới tính *@

            <p><strong>DOB:</strong> @Model.Dob.ToShortDateString()</p>
            @* Ngày sinh — chuyển thành dạng dd/MM/yyyy *@
        </div>
    </div>

    @* ======================= CURRENT COURSES ======================== *@
    <div style="
        width: 65%;
        background: #ffffff;
        padding: 20px;
        border-radius: 12px;
        border: 1px solid #ddd;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    ">
        <h4 class="fw-bold mb-3">Current Courses</h4>

        @* Kiểm tra xem ViewBag.Courses có dữ liệu không *@
        @if (courses != null && courses.Count > 0)
        {
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Course Name</th>
                        <th>Class</th>
                        <th>Credits</th>
                        <th>Faculty</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var c in courses)
                    {
                        @* Lặp qua danh sách khóa học *@
                        <tr>
                            <td>@c.CourseName</td>
                            @* Tên khóa học *@

                            <td>@c.Class</td>
                            @* Lớp học của khóa *@

                            <td>@c.Credits</td>
                            @* Số tín chỉ *@

                            <td>@(c.Faculty?.FacultyName ?? "N/A")</td>
                            @* Tên giảng viên — nếu null thì hiển thị N/A *@
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            @* Trường hợp sinh viên chưa đăng ký môn học nào *@
            <p class="text-muted">You are not enrolled in any course.</p>
        }
    </div>
</div>
